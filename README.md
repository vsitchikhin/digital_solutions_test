# Тестовое задание для компании ООО Цифровые Решения

## Задача
Создать список (таблицу) из 1 000 000 элементов (ID от 1 до 1 000 000) с интерфейсом для выбора и сортировки

### Требования к функционалу
1. В интерфейсе 2 окна: левое отображет все элементы, правое - выбранные элементы
2. Функции левого окна:
   - Фильтрация элементов по ID
   - Бесконечный скролл (при загрузке отображаем не более 20 элементов, далее подгружаем порционно по 20 элементов)
   - Добавление новых элементов с новыми ID, задается вручную, может быть любым
3. Функции правого окна:
   - Фильтрация элементов по ID
   - Сортировка элементов с помощью Drag & Drop (работает также для отфильтрованного списка)
   - Бесконечный скролл, аналогично как на левом
   - Сохранение состояния выбора и сортировки между обновлениями страницы (поиск сохраняться не должен)
4. Общие требования:
    - Результаты сортировки и выбора хранятся на сервере (без БД, достаточно хранения в памяти на время жизни приложения)
    - При поиске также отображается не более 20 элементов, остальные подгружаются по мере прокрутки порциями по 20 элементов
    - Учетные записи не нужны, данные могут быть общими для всех пользователей
    - Запросы должны быть реализованы через очередь с дедупликацией и гарантией, что одно и то же значение не будет добавлено повторно
    - Батчинг добавления элементов раз в 10 сек, получения и изменения данных раз в секунду
5. Технологии:
    - Бэкенд - Express.js
    - Фронтенд - Vue 3

## Реализация
1. Для упрощения сборки фронта и бэка - реализую оба сервиса в одном репозитории. Такой подход избрал только для сокращения времени на разработку, чтобы не прыгать по разным репозиториям и директориям.

### Запуск сервера
`cd back_node`

Если необходимо запустить отдельно сервер на машине
1. Выполняем `npm i`
2. Добавляем в `back_node/.env` следующие переменные:
    ```
    PORT=4000
    
    DEFAULT_ENTITIES_LIMIT=20
    MAX_ENTITIES_LIMIT=100
    UNIVERSE_MAX_ID=1000000
    
    NODE_ENV='dev'
    
    HEADER_REQUEST_ID='x-request-id'
    HEADER_CORRELATION_ID='x-correlation-id'
    
    ADD_ELEMENTS_SCHEDULE=10000
    UPDATE_ELEMENTS_SCHEDULE=1000
    
    CHUNK_SIZE=10000
    ```
3. Если необходимо запустить в dev режиме: `npm run dev`
4. Если необходимо запустить в прод режиме: `npm run build` -> `npm run start`

Также можно запустить через докер.
```
cd ../ # возвращаемся в корень всего проекта

docker compose build back # билдим образ бэка
docker compose up -d back # поднимаем контейнер с бэком

docker compose down # останавливаем приложение
docker compose down -v --rmi all --remove-orphans # полная очистка
```

Можно запустить и сразу все
```
# подразумевается, что находимся в корневой директории всего проекта
docker compose build
docker compose up -d

# можно также собрать и поднять с помощью одной команды:
docker compose up --build
```